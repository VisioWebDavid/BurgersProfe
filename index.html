<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hod Dog & Hamburguesas El Profe</title>
<script src="https://cdn.tailwindcss.com"></script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
import { getFirestore, collection, addDoc, query, where, orderBy, getDocs } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDt-VmULFhsd7NkWpAtnmfZe1HQBUVXurQ",
  authDomain: "burgers-944f4.firebaseapp.com",
  projectId: "burgers-944f4",
  storageBucket: "burgers-944f4.firebasestorage.app",
  messagingSenderId: "669488295949",
  appId: "1:669488295949:web:802ae681e03367742e6544",
  measurementId: "G-ZFXQWJQJPY"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
window.firebaseApp = { db };

let cart = [];

// Mostrar variantes
window.toggleVariants = function(id, img){
  document.querySelectorAll('.variants').forEach(v=>v.style.display='none');
  document.querySelectorAll('.card').forEach(c=>c.classList.remove('selected'));
  const v = document.getElementById(id);
  v.style.display='block';
  img.parentElement.classList.add('selected');
}

// Agregar productos al carrito
window.addProduct = function(name, price){
  cart.push({name, price});
  renderCart();
}

// Quitar productos
window.removeProduct = function(i){
  cart.splice(i,1);
  renderCart();
}

// Renderizar carrito
function renderCart(){
  const list = document.getElementById('productsList');
  list.innerHTML='';
  cart.forEach((p,i)=>{
    list.innerHTML+=`<div class="product-item">
      ${p.name} - $${p.price}
      <button class="remove-btn" onclick="removeProduct(${i})">X</button>
    </div>`;
  });
}

// Enviar a WhatsApp y guardar en Firebase
window.sendWhatsAppAndSave = async function(){
  const nombre = document.getElementById('nombre').value.trim();
  if(nombre===''){ alert("Escribe tu nombre"); return; }
  if(cart.length===0){ alert("Agrega productos"); return; }

  const total = cart.reduce((a,b)=>a+b.price,0);
  const productosStr = cart.map(p=>`${p.name} ($${p.price})`).join('%0A');
  const hora = new Date().toLocaleTimeString();
  const fecha = new Date().toISOString().split('T')[0]; // YYYY-MM-DD

  const mensaje = `Pedido de ${nombre}%0AProductos:%0A${productosStr}%0AHora: ${hora}%0ATotal: $${total} üçî`;
  window.open(`https://wa.me/526677975519?text=${mensaje}`, '_blank');

  await addDoc(collection(db,'pedidos'),{
    nombre, productos: cart, total, hora, fecha
  });

  cart=[];
  renderCart();
  document.getElementById('nombre').value='';
}

// Admin login SOLO CONTRASE√ëA
window.loginAdmin = async function(){
  const pass = document.getElementById('adminPass').value.trim();
  const adminPassword = "Cangreburger171025"; // üîë contrase√±a fija
  if(pass===adminPassword){
    document.getElementById('loginDiv').style.display='none';
    document.getElementById('dashboardDiv').style.display='block';
    loadPedidos();
  }else{
    alert("‚ùå Contrase√±a incorrecta");
  }
}

// Cargar pedidos del d√≠a
async function loadPedidos(){
  const fechaHoy = new Date().toISOString().split('T')[0]; // YYYY-MM-DD
  document.getElementById('fechaHoy').innerText = fechaHoy;

  const q = query(collection(db,'pedidos'), where("fecha","==",fechaHoy), orderBy("hora"));
  const snapshot = await getDocs(q);
  const cont = document.getElementById('pedidosContainer');
  cont.innerHTML='';
  snapshot.forEach(doc=>{
    const p = doc.data();
    cont.innerHTML+=`<div style="background:#222; padding:0.5rem; margin-bottom:0.5rem; border-radius:8px;">
      <strong>${p.nombre}</strong> - ${p.hora} - Total: $${p.total} üçî<br>
      ${p.productos.map(x=>x.name+' ($'+x.price+')').join(', ')}
    </div>`;
  });
}

// Mostrar login al picar sticker
document.getElementById('adminSticker').onclick = ()=>{
  document.getElementById('loginDiv').style.display='block';
}
</script>

<style>
body { background:#111; color:white; font-family:'Poppins', sans-serif; margin:0; }
header { text-align:center; padding:2rem; background:linear-gradient(45deg,#313030,#cc0000); font-size:2rem; font-weight:bold; letter-spacing:2px; }
.menu { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:1rem; padding:2rem; max-width:1200px; margin:auto; }
.card { background:#222; border-radius:15px; overflow:hidden; text-align:center; cursor:pointer; transition:0.3s; }
.card img { width:100%; height:200px; object-fit:cover; border-radius:15px; transition:0.3s; }
.card:hover img { transform:scale(1.05); box-shadow:0 0 20px #313030; }
.card.selected img { box-shadow:0 0 25px #ffcc00; border:3px solid #ffcc00; transform:scale(1.07); }
.variants { display:none; margin-top:1rem; transition:0.3s; }
.variant-btn { display:block; margin:5px auto; padding:0.5rem 1rem; border-radius:8px; font-weight:bold; cursor:pointer; transition:0.3s; width:80%; color:#fff; border:2px solid #ff6600; }
.variant-btn:hover { background:#cc0000; transform:scale(1.05); }
.form-container { background:#1a1a1a; padding:2rem; border-top:3px solid #313030; max-width:500px; margin:2rem auto; border-radius:15px; box-shadow:0 0 20px #ff6600; }
.form-container h2 { text-align:center; margin-bottom:1rem; color:#ffcc66; }
label { display:block; margin-bottom:0.5rem; font-weight:bold; color:#ffcc66; }
input { width:100%; padding:0.7rem; border-radius:8px; border:2px solid #555; outline:none; margin-bottom:1rem; background:#222; color:white; transition:0.3s; }
input:focus { border-color:#313030; box-shadow:0 0 10px #313030; }
.products-list { margin:1rem 0; }
.product-item { background:#333; padding:0.5rem; border-radius:8px; display:flex; justify-content:space-between; align-items:center; margin-bottom:0.5rem; }
.remove-btn { background:#cc0000; border:none; border-radius:50%; color:white; font-weight:bold; width:25px; height:25px; cursor:pointer; }
.submit-btn { width:100%; background:#313030; padding:1rem; border:none; border-radius:10px; cursor:pointer; font-size:1.2rem; font-weight:bold; transition:0.3s; }
.submit-btn:hover { background:#cc0000; transform:scale(1.05); }
.horario { position:fixed; bottom:20px; right:20px; background:#ff6600; color:#111; padding:1rem 1.5rem; border-radius:15px; font-weight:bold; box-shadow:0 0 15px #ff6600; animation: float 2s infinite alternate; z-index:1000; }
#adminSticker { position:fixed; top:20px; right:20px; font-size:2rem; cursor:pointer; z-index:1000; }
#loginDiv input, #loginDiv button { width:100%; margin-bottom:0.5rem; padding:0.7rem; border-radius:8px; border:none; outline:none; }
#loginDiv button { background:#cc0000; color:white; font-weight:bold; cursor:pointer; }
#dashboardDiv { display:none; color:white; max-width:900px; margin:20px auto; }
@media(max-width:600px){ .card img { height:150px; } .form-container { margin:1rem; padding:1rem; } .menu { gap:1rem; padding:1rem; } }
</style>

<body>

<header>üçî HOD DOG & HAMBURGUESAS EL PROFE üçó</header>

<section class="menu">
<!-- Hamburguesa -->
<div class="card">
  <img src="https://i.postimg.cc/3w8Lv8Jy/hamburguesa.jpg" alt="Hamburguesa" onclick="toggleVariants('hamburguesaVariants', this)">
  <h3>Hamburguesa</h3>
  <div class="variants" id="hamburguesaVariants">
    <button class="variant-btn" onclick="addProduct('Hamburguesa Sencilla',80)">Sencilla $80</button>
    <button class="variant-btn" onclick="addProduct('Hamburguesa Especial',130)">Especial $130</button>
    <button class="variant-btn" onclick="addProduct('Hawaiana',120)">Hawaiana $120</button>
    <button class="variant-btn" onclick="addProduct('Especial de Camar√≥n',140)">Especial de Camar√≥n $140</button>
  </div>
</div>

<!-- Hot Dog -->
<div class="card">
  <img src="https://i.postimg.cc/RZcFnG6p/had-odg.jpg" alt="Hot Dog" onclick="toggleVariants('hotdogVariants', this)">
  <h3>Hot Dog</h3>
  <div class="variants" id="hotdogVariants">
    <button class="variant-btn" onclick="addProduct('Hot Dog Sencillo',60)">Sencillo $60</button>
    <button class="variant-btn" onclick="addProduct('Especial de Camar√≥n',100)">Especial de Camar√≥n $100</button>
    <button class="variant-btn" onclick="addProduct('Embarazado',90)">Embarazado $90</button>
  </div>
</div>

<!-- Papas -->
<div class="card">
  <img src="https://i.postimg.cc/QNnfKJ1S/papas.avif" alt="Papas" onclick="toggleVariants('papasVariants', this)">
  <h3>Papas</h3>
  <div class="variants" id="papasVariants">
    <button class="variant-btn" onclick="addProduct('Papas Gajo',60)">Gajo $60</button>
    <button class="variant-btn" onclick="addProduct('Papas Naturales',55)">Naturales $55</button>
  </div>
</div>

<!-- Bonneles -->
<div class="card">
  <img src="https://i.postimg.cc/htmZBQJY/bonneles.jpg" alt="Bonneles" onclick="toggleVariants('bonnelesVariants', this)">
  <h3>Bonneles</h3>
  <div class="variants" id="bonnelesVariants">
    <button class="variant-btn" onclick="addProduct('Bonneles Sencillo',95)">Sencillo $95</button>
    <button class="variant-btn" onclick="addProduct('Buffalo',110)">Buffalo $110</button>
    <button class="variant-btn" onclick="addProduct('BBQ Mango Habanero',120)">BBQ Mango Habanero $120</button>
  </div>
</div>
</section>

<section class="form-container">
<h2>üìã Tu Pedido</h2>
<label>Nombre:</label>
<input type="text" id="nombre" placeholder="Escribe tu nombre">
<div class="products-list" id="productsList"></div>
<button class="submit-btn" onclick="sendWhatsAppAndSave()">Enviar Pedido</button>
</section>

<div class="horario">Horario: Vie, S√°b, Dom, Lun 6PM - 11PM</div>
<div id="adminSticker">üçî</div>

<!-- Login Admin SOLO CONTRASE√ëA -->
<div id="loginDiv" style="display:none; max-width:400px; margin:20px auto;">
<h2>Login Admin</h2>
<input type="password" id="adminPass" placeholder="Contrase√±a">
<button onclick="loginAdmin()">Ingresar</button>
</div>

<div id="dashboardDiv">
<h2>Pedidos del D√≠a: <span id="fechaHoy"></span></h2>
<div id="pedidosContainer"></div>
</div>

</body>
</html>


